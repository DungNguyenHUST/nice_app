<div class='post_index_block'>
    <div class='post_index_info'>
        <%owner_user = find_owner_user(post.user_id)%>
        <div class='post_index_info_left'>
            <div class="post_index_user_avatar checked_<%=find_user_color(owner_user.name)%>">
                <a><%= link_to owner_user.name[0], user_session_path(owner_user), class: "post_index_user_name_label"%></a>
            </div>
        </div>
        <div class='post_index_info_right'>
            <div class="post_index_user_name">
                <a><%=owner_user.name%></a>
            </div>
            <div class="post_index_create">
                <span><%=time_ago_in_words(post.created_at)%></span>
            </div>
        </div>
    </div>
    <div class='post_index_title'>
        <a><%= link_to (post.title), post_path(post) %></a>
    </div>
    <div class='post_index_content'>
        <a><%=post.content%></a>
    </div>
    <div class="post_index_toolbar_block" id="vote<%=post.id%>">
        <div class="post_index_vote_block">
            <%if user_signed_in?%>
                <% pre_vote = post.post_votes.find { |vote| vote.user_id == current_user.id} %>
                <% if pre_vote %>  
                    <%= button_to post_post_vote_path(post, pre_vote), method: :delete, remote: true, form_class: "post_index_vote_highlight" do%>
                        <i><%= bootstrap_icon "arrow-up-circle", width: 18, height: 18, fill: "#1877f2" %></i>
                        <span><%= post.post_votes.count%> Vote</span> 
                    <%end%> 
                <%else%>
                    <%= button_to post_post_votes_path(post), method: :post, remote: true, form_class: "post_index_vote" do%>
                        <i><%= bootstrap_icon "arrow-up-circle", width: 18, height: 18, fill: "#333" %></i>
                        <span><%= post.post_votes.count%> Vote</span> 
                    <%end%> 
                <%end%>
            <%else%>
                <%= button_to new_user_session_path, :method => :get, form_class: "post_index_vote" do%>
                    <i><%= bootstrap_icon "arrow-up-circle", width: 18, height: 18, fill: "#333" %></i>
                    <span><%= post.post_votes.count%> Vote</span> 
                <%end%> 
            <%end%>
        </div>

        <div class="post_index_unvote_block">
            <%if user_signed_in?%>
                <% pre_unvote = post.post_unvotes.find { |unvote| unvote.user_id == current_user.id} %>
                <% if pre_unvote %>  
                    <%= button_to post_post_unvote_path(post, pre_unvote), method: :delete, remote: true, form_class: "post_index_unvote_highlight" do%>
                        <i><%= bootstrap_icon "arrow-down-circle", width: 18, height: 18, fill: "#1877f2" %></i>
                        <span><%= post.post_unvotes.count%> Unvote</span> 
                    <%end%> 
                <%else%>
                    <%= button_to post_post_unvotes_path(post), method: :post, remote: true, form_class: "post_index_unvote" do%>
                        <i><%= bootstrap_icon "arrow-down-circle", width: 18, height: 18, fill: "#333" %></i>
                        <span><%= post.post_unvotes.count%> Unvote</span> 
                    <%end%> 
                <%end%>
            <%else%>
                <%= button_to new_user_session_path, :method => :get, form_class: "post_index_unvote" do%>
                    <i><%= bootstrap_icon "arrow-down-circle", width: 18, height: 18, fill: "#333" %></i>
                    <span><%= post.post_unvotes.count%> Unvote</span> 
                <%end%> 
            <%end%>
        </div>

        <div class="post_index_comment_block">
            <%= button_to post_path(post), method: :get, form_class: "post_index_comment" do%>
                <i><%= bootstrap_icon "reply", width: 22, height: 22, fill: "#333" %></i>
                <span><%= post.post_comments.count%> Comments</span> 
            <%end%> 
        </div>

        <div class="post_index_save_block">
            <%= button_to post_path(post), method: :get, form_class: "post_index_save" do%>
                <i><%= bootstrap_icon "bookmark", width: 18, height: 18, fill: "#333" %></i>
                <span>Save</span> 
            <%end%> 
        </div>

        <div class="post_index_share_block">
            <%= button_to post_path(post), method: :get, form_class: "post_index_share" do%>
                <i><%= bootstrap_icon "share", width: 18, height: 18, fill: "#333" %></i>
                <span>Share</span> 
            <%end%> 
        </div>
    </div>
</div>